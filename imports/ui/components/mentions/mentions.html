<template name="mentions">
  <div class="mentions-index">
    <div class="card">
      <div class="card-body">
        <div class="card-title">
          <h1 class="{{#if unreadCount}}float-left{{/if}}">My mentions</h1>
          {{#if unreadCount}}
          <div class="float-right">
            <a class="btn btn-sm btn-success" href="" role="button" id="markAllAsRead">Mark all as read</a>
          </div>
          {{/if}}
        </div>
        {{#if SubsCacheReady}}
          {{#if problems.count}}
          <br />
          {{#each problems}}
          <div class="card" style="width: 100%">
            <div class="card-body">
              <div class="card-title">
                <a href="/{{_id}}" style="text-decoration: none;"><h5>{{summary}}</h5></a>
              </div>
              <div class="d-block d-sm-none d-block d-sm-none">
                {{#each mentions}}
                  <div style="{{#unless read}}background-color: #e4e5e6{{/unless}}" class="mention-item border-top padding-5">
                    <a style="text-decoration: none; display: block;" href="{{href}}">
                      <span>{{message}}</span>
                      <br />{{from}}
                      <br />{{showTimeAgoTimestamp createdAt}}
                    </a>
                  </div>
                {{/each}}
              </div>
              <div class="d-none d-sm-block clearfix">
                <table class="table table-hover mt-3">
                  <tbody>
                    {{#each mentions}}
                      <tr style="{{#unless read}}background-color: #e4e5e6{{/unless}}" class="mention-item">
                        <a style="text-decoration: none;" href="{{href}}">
                        <td scope="row" style="width: 85%">{{message}}</td>
                        <td>{{from}}</td>
                        <td style="width: 20%">{{showTimeAgoTimestamp createdAt}}</td>
                        </a>
                      </tr>
                    {{/each}}
                  </tbody>
                </table>
              </div>
            </div>
        </div>
            {{/each}}
          {{else}}
            <div class="mt-3">
              {{> emptyResult text="Nobody mentioned you yet" description="" icon=""}}
            </div>
          {{/if}}
        {{else}}
          {{> loader}}
        {{/if}}
      </div>
    </div>
  </div>
</template>
